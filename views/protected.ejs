<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Zona Protegida</title>
</head>
<body>
  <h1>Zona Protegida</h1>
  <p>Bienvenido, <%= user.username %> (ID: <%= user.id %>)</p>

  <button id="refreshBtn">Refrescar Token</button>
  <button id="logoutBtn">Cerrar sesi√≥n</button>
  <button onclick="window.location.href='/'">Volver al inicio</button>

  <script>
    // REFRESH TOKEN
    document.getElementById('refreshBtn').addEventListener('click', async () => {
      const res = await fetch('/refresh', { method: 'POST' })
      if (res.ok) {
        alert('Token renovado correctamente')
      } else {
        alert('No se pudo renovar el token')
      }
    })

    // LOGOUT
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      await fetch('/logout', { method: 'POST' })
      window.location.href = '/'
    })
  </script>
</body>
</html>
